<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.briup.shopping.mapper.ex.ShoppingCarEXMapperzp">
    <resultMap id="abc" type="com.briup.shopping.bean.ex.ShoppingCarEXzp">
        <id column="id" property="id"></id>
        <result column="count" property="count"></result>
        <result column="totalprice" property="totalprice"></result>
        <result column="cname" property="cname"></result>
        <collection property="goods" column="sid" ofType="com.briup.shopping.bean.ex.GoodsEXzp" select="selectgood"></collection>
    </resultMap>
    <select id="findAllShopping" resultMap="abc">
        select s.*,c.username cname ,s.id sid
        from a_shoppingcar s,a_customer c
        where c.id=s.customer_id
    </select>
    <select id="selectgood" resultType="com.briup.shopping.bean.ex.GoodsEXzp">
        select g.name,g.description
        from a_gs gs,a_goods g
        where g.id=gs.goods_id and gs.shoppingcar_id=#{id}
    </select>
    <resultMap id="abd" type="com.briup.shopping.bean.ex.ShoppingCarEXzp">
        <id column="id" property="id"></id>
        <result column="count" property="count"></result>
        <result column="totalprice" property="totalprice"></result>
        <result column="cname" property="cname"></result>
        <collection property="goods" column="sid" ofType="com.briup.shopping.bean.ex.GoodsEXzp" select="selectgoods"></collection>
    </resultMap>
    <select id="selectById" resultMap="abd">
        select s.*,c.username cname ,s.id sid
        from a_shoppingcar s,a_customer c
        where c.id=s.customer_id and s.id=#{id}
    </select>
    <select id="selectgoods" resultType="com.briup.shopping.bean.ex.GoodsEXzp">
        select g.name,g.description
        from a_gs gs,a_goods g
        where g.id=gs.goods_id and gs.shoppingcar_id=#{id}
    </select>
</mapper>