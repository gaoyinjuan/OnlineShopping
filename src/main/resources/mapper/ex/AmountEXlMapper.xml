<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.briup.shopping.mapper.ex.AmountEXlMapper">
    <resultMap id="abn" type="com.briup.shopping.bean.ex.AmountEXl">
        <collection property="orders" ofType="com.briup.shopping.bean.Order" select="selectorders" column="id"></collection>
        <collection property="goods" ofType="com.briup.shopping.bean.Goods" column="id" select="selectgoods"></collection>

    </resultMap>
    <resultMap id="aaa" type="com.briup.shopping.bean.ex.ResultEXl">
        <result column="code" property="code"></result>

    </resultMap>
    <select id="findAll" resultMap="abn">
        select s.status statusorders,s.id id from a_status s
    </select>
    <select id="selectorders" resultType="int">
        select count(g.order_id) from a_order o,a_go g where group by g.order_id having count (g.order_id)>1
        and o.id=g.order_id and o.status_id=#{id}
    </select>
   <select id="selectgoods" resultType="int">
       select count(*) from a_goods g,a_order o,a_go m where o.status_id=#{id} and m.order_id=o.id and g.id=m.goods_id
   </select>
</mapper>